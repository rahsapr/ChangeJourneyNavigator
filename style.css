/* --- THEME & FONT --- */
:root {
    --bg-sidebar: #191c21;
    --bg-main: #20242a;
    --bg-context: #282d34;
    --border-color: #3a414a;
    --text-primary: #e1e7f0;
    --text-secondary: #8c96a7;
    --accent-blue: #3693ff;
    --font-main: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    --status-green: #29b378; --status-yellow: #f0b90a; --status-red: #d94545; --status-grey: #6c757d;
}

@import url('https://rsms.me/inter/inter.css');
html { font-family: var(--font-main); }

body { background-color: var(--bg-main); color: var(--text-primary); margin: 0; overflow: hidden; }

/* --- LAYOUT --- */
.synapse-app { display: flex; height: 100vh; }
.sidebar { width: 55px; background-color: var(--bg-sidebar); border-right: 1px solid var(--border-color); display: flex; flex-direction: column; align-items: center; padding: 15px 0; flex-shrink: 0; }
.main-content { flex-grow: 1; }
.view { display: none; height: 100%; }
.view.active { display: flex; }

#planView { flex-direction: row; }
.plan-column { flex-grow: 1; display: flex; flex-direction: column; }
.context-column { width: 400px; border-left: 1px solid var(--border-color); display: flex; flex-direction: column; background-color: var(--bg-context); }

/* --- SIDEBAR --- */
.sidebar .logo { font-size: 1.5em; color: var(--accent-blue); margin-bottom: 25px; }
.sidebar ul { list-style: none; padding: 0; margin: 0; text-align: center; }
.sidebar .nav-item { font-size: 1.3em; color: var(--text-secondary); padding: 12px 0; cursor: pointer; transition: color 0.2s; }
.sidebar .nav-item:hover, .sidebar .nav-item.active { color: var(--accent-blue); }
.sidebar .file-loader { margin-top: auto; }
.sidebar .file-loader label { cursor: pointer; color: var(--text-secondary); font-size: 1.3em; }
#csvUploader { display: none; }

/* --- HEADERS --- */
.main-header { padding: 12px 20px; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; flex-shrink: 0; }
.main-header h2, .context-header h3 { margin: 0; font-size: 1em; font-weight: 500; }
.context-header { padding: 16px 20px; border-bottom: 1px solid var(--border-color); }

/* --- PLAN VIEW --- */
.phase-list { overflow-y: auto; padding: 10px 0; }
.placeholder { padding: 20px; color: var(--text-secondary); }
.phase-group { margin: 0 10px 20px 10px; }
.phase-group-header { padding: 8px 10px; font-size: 0.9em; font-weight: 600; cursor: pointer; display: flex; align-items: center; border-radius: 5px; }
.phase-group-header:hover { background-color: #2a2f37; }
.phase-group-header .chevron { margin-right: 8px; transition: transform 0.2s; color: var(--text-secondary); }
.phase-group.expanded .chevron { transform: rotate(90deg); }
.milestone-table { display: table; width: 100%; border-collapse: collapse; max-height: 0; overflow: hidden; }
.phase-group.expanded .milestone-table { max-height: 1000px; } /* Simple expand */

.milestone-row { display: table-row; font-size: 0.9em; cursor: pointer; }
.milestone-row:hover { background-color: #2a2f37; }
.milestone-row.active { background-color: rgba(54, 147, 255, 0.1); }
.milestone-row > div { display: table-cell; padding: 10px; border-bottom: 1px solid var(--border-color); vertical-align: middle; }
.ms-status i { font-size: 1.1em; }
.fa-circle-check { color: var(--status-green); }
.fa-circle-half-stroke { color: var(--status-yellow); }
.fa-circle { color: var(--status-grey); }
.ms-risk { text-align: center; }
.risk-badge { display: inline-block; width: 12px; height: 12px; border-radius: 50%; }
.risk-badge.High { background-color: var(--status-red); }
.risk-badge.Medium { background-color: var(--status-yellow); }
.risk-badge.Low { background-color: var(--status-grey); }

/* --- CONTEXT & GRAPHS --- */
.graph-container { flex-grow: 1; }

/* --- ANALYTICS HUB --- */
.analytics-grid { display: grid; grid-template-columns: repeat(3, 1fr); grid-template-rows: auto 1fr; gap: 20px; padding: 20px; height: calc(100% - 53px); }
.kpi-card, .chart-card { background-color: var(--bg-context); border: 1px solid var(--border-color); border-radius: 8px; padding: 20px; }
#chartTasksByPhase { grid-column: 1 / 3; }
#chartTasksByOwner { grid-column: 3 / 4; grid-row: 1 / 3; }
.kpi-card { display: flex; flex-direction: column; justify-content: center; align-items: center; }
.kpi-title { font-size: 0.9em; color: var(--text-secondary); margin-bottom: 10px; }
.kpi-value { font-size: 2.5em; font-weight: 600; }
.kpi-subvalue { font-size: 0.8em; color: var(--text-secondary); }
