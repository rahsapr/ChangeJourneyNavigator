<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Monarch</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css">
</head>
<body>
    <div id="monarchApp">
        <!-- Main Sidebar Navigation -->
        <nav class="sidebar">
            <div class="sidebar-logo"><i class="fa-solid fa-crown"></i></div>
            <ul class="sidebar-nav">
                <li class="nav-item active" data-view="list" title="List"><i class="fa-solid fa-list"></i></li>
                <li class="nav-item" data-view="board" title="Board"><i class="fa-solid fa-table-columns"></i></li>
                <li class="nav-item" data-view="gantt" title="Gantt"><i class="fa-solid fa-chart-gantt"></i></li>
            </ul>
            <div class="sidebar-footer">
                <label for="csvUploader" title="Upload Plan"><i class="fa-solid fa-upload"></i></label>
                <input type="file" id="csvUploader" accept=".csv">
            </div>
        </nav>

        <!-- Main Content Area -->
        <main class="main-content">
            <header class="main-header">
                <h1 id="viewTitle">List</h1>
                <div class="header-controls">
                    <button id="downloadCsvBtn" class="control-btn"><i class="fa-solid fa-download"></i> Download CSV</button>
                    <button id="addTaskBtn" class="control-btn primary"><i class="fa-solid fa-plus"></i> Add Task</button>
                    <!-- NEW: Add the Group by Dropdown -->
                    <div id="boardGroupBy" class="control-group hidden">
                        <label for="groupBySelect">Group by:</label>
                        <select id="groupBySelect" class="control-select">
                            <option value="Status">Status</option>
                            <option value="Workstream">Workstream</option>
                            <option value="Owner">Owner</option>
                            <option value="Phase">Phase</option>
                        </select>
                    </div>
                    <button id="downloadCsvBtn" class="control-btn"><i class="fa-solid fa-download"></i> Download CSV</button>
                    <button id="addTaskBtn" class="control-btn primary"><i class="fa-solid fa-plus"></i> Add Task</button>
                </div>

                </div>
            </header>

            <div id="viewContainer" class="view-container">
                <!-- LIST VIEW -->
                <div id="listView" class="view active">
                    <div class="list-view-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Status</th>
                                    <th>Title</th>
                                    <th>Workstream</th>
                                    <th>Owner</th>
                                    <th>Start Date</th>
                                    <th>End Date</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody id="taskListBody">
                                <!-- Task rows will be rendered here -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- BOARD VIEW (Placeholder) -->
                <div id="boardView" class="view">
                    <div class="placeholder-text">Board View coming soon...</div>
                </div>

                <!-- GANTT VIEW (Placeholder) -->
                <div id="ganttView" class="view">
                    <div class="placeholder-text">Gantt View coming soon...</div>
                </div>
            </div>
        </main>
    </div>

    <!-- MODAL for Add/Edit Task -->
    <div id="taskModal" class="modal-overlay hidden">
        <div class="modal-content">
            <form id="taskForm">
                <h2 id="modalTitle">Add New Task</h2>
                <input type="hidden" id="taskId">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="title">Title</label>
                        <input type="text" id="title" required>
                    </div>
                    <div class="form-group">
                        <label for="status">Status</label>
                        <select id="status">
                            <option>To Do</option>
                            <option>In Progress</option>
                            <option>Done</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="workstream">Workstream</label>
                        <input type="text" id="workstream">
                    </div>
                    <div class="form-group">
                        <label for="owner">Owner</label>
                        <input type="text" id="owner">
                    </div>
                    <div class="form-group">
                        <label for="startDate">Start Date</label>
                        <input type="date" id="startDate">
                    </div>
                    <div class="form-group">
                        <label for="endDate">End Date</label>
                        <input type="date" id="endDate">
                    </div>
                </div>
                <div class="modal-actions">
                    <button type="button" id="deleteTaskBtn" class="btn-danger">Delete</button>
                    <div>
                        <button type="button" id="cancelBtn">Cancel</button>
                        <button type="submit" class="primary">Save Task</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
    <script src="app.js"></script>
</body>
</html>
